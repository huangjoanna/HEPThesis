\usepackage{xspace}
\usepackage{tikz}
\usepackage{morefloats,afterpage}
\usepackage{mathrsfs} % script font
\usepackage{verbatim}
\usepackage{caption}
\usepackage{subcaption}

\usepackage[acronym]{glossaries}
\makeglossaries

%% Feynman diagrams
\usepackage{tikz}
\usepackage[compat=1.1.0]{tikz-feynman}

%% Colours and commands for the dominant-pool colour map keys
\input{dominantpoolskey}

%% To-do notes
\setlength{\marginparwidth}{2cm}
\usepackage[colorinlistoftodos,prependcaption,textsize=tiny]{todonotes}
\DeclareRobustCommand{\unsure}[2][1=]{\todo[linecolor=red,backgroundcolor=red!25,bordercolor=red,#1]{#2}}
\DeclareRobustCommand{\change}[2][1=]{\todo[linecolor=blue,backgroundcolor=blue!25,bordercolor=blue,#1]{#2}}
\DeclareRobustCommand{\info}[2][1=]{\todo[linecolor=green,backgroundcolor=green!25,bordercolor=green,#1]{#2}}
\DeclareRobustCommand{\improvement}[2][1=]{\todo[linecolor=purple,backgroundcolor=purple!25,bordercolor=purple,#1]{#2}}

%% Using Babel allows other languages to be used and mixed-in easily
%\usepackage[ngerman,english]{babel}
\usepackage[english]{babel}
\selectlanguage{english}

%% Citation system tweaks
\usepackage{cite}
% \let\@OldCite\cite
% \renewcommand{\cite}[1]{\mbox{\!\!\!\@OldCite{#1}}}

%% Maths
% TODO: rework or eliminate maybemath
\usepackage{abmath}
\DeclareRobustCommand{\mymath}[1]{\ensuremath{\maybebmsf{#1}}}
% \DeclareRobustCommand{\parenths}[1]{\mymath{\left({#1}\right)}\xspace}
% \DeclareRobustCommand{\braces}[1]{\mymath{\left\{{#1}\right\}}\xspace}
% \DeclareRobustCommand{\angles}[1]{\mymath{\left\langle{#1}\right\rangle}\xspace}
% \DeclareRobustCommand{\sqbracs}[1]{\mymath{\left[{#1}\right]}\xspace}
% \DeclareRobustCommand{\mods}[1]{\mymath{\left\lvert{#1}\right\rvert}\xspace}
% \DeclareRobustCommand{\modsq}[1]{\mymath{\mods{#1}^2}\xspace}
% \DeclareRobustCommand{\dblmods}[1]{\mymath{\left\lVert{#1}\right\rVert}\xspace}
% \DeclareRobustCommand{\expOf}[1]{\mymath{\exp{\!\parenths{#1}}}\xspace}
% \DeclareRobustCommand{\eexp}[1]{\mymath{e^{#1}}\xspace}
% \DeclareRobustCommand{\plusquad}{\mymath{\oplus}\xspace}
% \DeclareRobustCommand{\logOf}[1]{\mymath{\log\!\parenths{#1}}\xspace}
% \DeclareRobustCommand{\lnOf}[1]{\mymath{\ln\!\parenths{#1}}\xspace}
% \DeclareRobustCommand{\ofOrder}[1]{\mymath{\mathcal{O}\parenths{#1}}\xspace}
% \DeclareRobustCommand{\SOgroup}[1]{\mymath{\mathup{SO}\parenths{#1}}\xspace}
% \DeclareRobustCommand{\SUgroup}[1]{\mymath{\mathup{SU}\parenths{#1}}\xspace}
% \DeclareRobustCommand{\Ugroup}[1]{\mymath{\mathup{U}\parenths{#1}}\xspace}
% \DeclareRobustCommand{\I}[1]{\mymath{\mathrm{i}}\xspace}
% \DeclareRobustCommand{\colvector}[1]{\mymath{\begin{pmatrix}#1\end{pmatrix}}\xspace}
\DeclareRobustCommand{\Rate}{\mymath{\Gamma}\xspace}
\DeclareRobustCommand{\RateOf}[1]{\mymath{\Gamma}\parenths{#1}\xspace}

%% High-energy physics stuff
\usepackage{abhep}
\usepackage{hepnames}
\usepackage{hepunits}
\DeclareRobustCommand{\arXivCode}[1]{arXiv:#1}
\DeclareRobustCommand{\CP}{\ensuremath{\mathcal{CP}}\xspace}
\DeclareRobustCommand{\CPviolation}{\CP-violation\xspace}
\DeclareRobustCommand{\CPv}{\CPviolation}
\DeclareRobustCommand{\LHCb}{LHCb\xspace}
\DeclareRobustCommand{\LHC}{LHC\xspace}
\DeclareRobustCommand{\LEP}{LEP\xspace}
\DeclareRobustCommand{\CERN}{CERN\xspace}
\DeclareRobustCommand{\bphysics}{\Pbottom-physics\xspace}
\DeclareRobustCommand{\bhadron}{\Pbottom-hadron\xspace}
\DeclareRobustCommand{\Bmeson}{\PB-meson\xspace}
\DeclareRobustCommand{\bbaryon}{\Pbottom-baryon\xspace}
\DeclareRobustCommand{\Bdecay}{\PB-decay\xspace}
\DeclareRobustCommand{\bdecay}{\Pbottom-decay\xspace}
\DeclareRobustCommand{\BToKPi}{\HepProcess{ \PB \to \PK \Ppi }\xspace}
\DeclareRobustCommand{\BToPiPi}{\HepProcess{ \PB \to \Ppi \Ppi }\xspace}
\DeclareRobustCommand{\BToKK}{\HepProcess{ \PB \to \PK \PK }\xspace}
\DeclareRobustCommand{\BToRhoPi}{\HepProcess{ \PB \to \Prho \Ppi }\xspace}
\DeclareRobustCommand{\BToRhoRho}{\HepProcess{ \PB \to \Prho \Prho }\xspace}
\DeclareRobustCommand{\Xbar}{\thesismath{\overline{X}}\xspace}
\DeclareRobustCommand{\Xzero}{\HepGenParticle{X}{}{0}\xspace}
\DeclareRobustCommand{\Xzerobar}{\HepGenAntiParticle{X}{}{0}\xspace}
\DeclareRobustCommand{\epluseminus}{\Ppositron\!\Pelectron\xspace}
\DeclareRobustCommand{\protonproton}{\Pproton\Pantiproton\xspace}
\DeclareRobustCommand{\photon}{\gamma}
\DeclareRobustCommand{\covd}{\mathcal{D}}
\newcommand{\SMgroup}{\SUgroup{3}$\times $\SUgroup{2}$\times$\Ugroup{1}}


%% VLQ
%% Physics
\newcommand{\herwig}{H\protect\scalebox{0.8}{ERWIG}\xspace}
\newcommand{\rivet}{R\protect\scalebox{0.8}{IVET}\xspace}
\newcommand{\yoda}{Y\protect\scalebox{0.8}{ODA}\xspace}
\newcommand{\hepdata}{HEPData\xspace}
\newcommand{\contur}{\textsc{Contur}\xspace}
\newcommand{\POWHEG}{P\protect\scalebox{0.8}{OWHEG}\xspace}
\newcommand{\SHERPA}{S\protect\scalebox{0.8}{HERPA}\xspace}
\newcommand{\feynrules}{F\protect\scalebox{0.8}{EYN}R\protect\scalebox{0.8}{ULES}\xspace}
\newcommand{\MET}{\ensuremath{E_\mathrm{T}^\mathrm{miss}}\xspace}
\newcommand{\CLs}{\ensuremath{\mathrm{CL}_\mathrm{s}}\xspace}

\newcommand{\B}{\ensuremath{B}\xspace}
\newcommand{\T}{\ensuremath{T}\xspace}
\newcommand{\X}{\ensuremath{X}\xspace}
\newcommand{\Y}{\ensuremath{Y}\xspace}
\newcommand{\BT}{\ensuremath{BT}\xspace}
\newcommand{\XT}{\ensuremath{X\mspace{-1mu}T}\xspace}
\newcommand{\BY}{\ensuremath{BY}\xspace}
\newcommand{\BTX}{\ensuremath{BT\mspace{-2mu}X}\xspace}
\newcommand{\BTY}{\ensuremath{BTY}\xspace}
\newcommand{\BTXY}{\ensuremath{BT\mspace{-2mu}XY}\xspace}

\newcommand{\triple}[3]{\text{#1:#2:#3}\xspace}
\newcommand{\WZH}{\triple{$W\!$}{$Z$}{$H$}}
\newcommand{\WZHozz}{\triple{1}{0}{0}}
\newcommand{\WZHzoz}{\triple{0}{1}{0}}
\newcommand{\WZHzzo}{\triple{0}{0}{1}}
\newcommand{\WZHooo}{\triple{1}{1}{1}}
\newcommand{\WZHttt}{\triple{$\tfrac{1}{3}$}{$\tfrac{1}{3}$}{$\tfrac{1}{3}$}}
\newcommand{\WZHtoo}{\triple{$\tfrac{1}{2}$}{$\tfrac{1}{4}$}{$\tfrac{1}{4}$}}
\newcommand{\WZHzoo}{\triple{0}{$\tfrac{1}{2}$}{$\tfrac{1}{2}$}}

%%  M4l

%% M4l 
\newcommand*{\Zp}{\ensuremath{Z^\prime}\xspace}
\newcommand*{\gp}{\ensuremath{g^\prime}\xspace}
\newcommand*{\Z}{\ensuremath{Z}\xspace}
\newcommand*{\W}{\ensuremath{W}\xspace}
\newcommand*{\V}{\ensuremath{V}\xspace}
\newcommand*{\VH}{\ensuremath{VH}\xspace}
\newcommand*{\mFourL}{\ensuremath{m_{4\ell}}}
\newcommand*{\mll}{\ensuremath{m_{\ell\ell}}}
\newcommand*{\qqZZ}{\ensuremath{q\bar{q}\to Z^{(*)}Z^{(*)}}\xspace}
\newcommand*{\qqFourL}{\ensuremath{q\bar{q}\to 4\ell}\xspace}
\newcommand*{\ggFourL}{\ensuremath{gg\to 4\ell}\xspace}
\newcommand*{\HZZFourL}{\ensuremath{H\to Z^{(*)}Z^{(*)} \to
    4\ell}\xspace}
\newcommand*{\HFourL}{\ensuremath{H\to
    4\ell}}
\newcommand*{\ZFourL}{\ensuremath{Z\to 4\ell}\xspace}
\newcommand*{\onshellZZ}{\text{on-shell }\ensuremath{ZZ}\xspace}
\newcommand*{\offshellZZ}{\text{off-shell }\ensuremath{ZZ}\xspace}
\newcommand*{\ggS}{\ensuremath{gg\left(\to H^{(*)}\right)\to Z^{(*)}Z^{(*)}\to 4\ell}\xspace}

\newcommand*{\mZOne}{\ensuremath{m_{12}}\xspace}
\newcommand*{\mZTwo}{\ensuremath{m_{34}}\xspace}

\newcommand*{\dPhiPairs}{\ensuremath{|\Delta \phi_{\text{pairs}}|}\xspace}
\newcommand*{\dPhill}{\ensuremath{|\Delta \phi_{\ell\ell}|}\xspace}

\newcommand*{\thetastar}{\ensuremath{\theta^*}\xspace}
\newcommand*{\costhetastar}{\ensuremath{\cos\theta^*}}
\newcommand*{\CTSOneTwo}{\ensuremath{\cos\theta^*_{12}}}
\newcommand*{\CTSThreeFour}{\ensuremath{\cos\theta^*_{34}}}
\newcommand*{\dYPairs}{\ensuremath{|\Delta y_{\text{pairs}}|}}
\newcommand*{\ptZOne}{\ensuremath{p_{\mathrm{T},12}}}
\newcommand*{\ptZTwo}{\ensuremath{p_{\mathrm{T},34}}}

\newcommand*{\yFourL}{\ensuremath{y_{4\ell}}}
% \newcommand*{\ptFourL}{\ensuremath{\pt^{4\ell}}}
\newcommand*{\ptFourL}{\ensuremath{p_{\mathrm{T},4\ell}}}
\def\openloops{\textsc{OpenLoops}}
\def\nnpdfnnlo{\texttt{NNPDF3.0nnlo}}
\def\nnpdfnlo{\texttt{NNPDF3.0nlo}}
\def\pythia{\textsc{Pythia8}}
\def\ctfourteennnlo{\texttt{CT14nnlo}}
\def\mmhtnnlo{\texttt{MMHT2014nnlo}}
\def\powheg{\textsc{Powheg}}
\def\nnpdftwo{\texttt{NNPDF2.3lo}}
\def\madgraph{M\textsc{ad}G\textsc{raph}5\_aMC@NLO}
\newcommand*{\chg}{\ensuremath{c_{HG}}\xspace}
\newcommand*{\chgtil}{\ensuremath{\tilde{c}_{HG}}\xspace}
\newcommand*{\chdd}{\ensuremath{c_{HD}}\xspace}
\newcommand*{\chwb}{\ensuremath{c_{HWB}}\xspace}
\newcommand*{\chd}{\ensuremath{c_{Hd}}\xspace}
\newcommand*{\chu}{\ensuremath{c_{Hu}}\xspace}
\newcommand*{\che}{\ensuremath{c_{He}}\xspace}
\newcommand*{\chlone}{\ensuremath{c_{Hl}^{(1)}}\xspace}
\newcommand*{\chlthr}{\ensuremath{c_{Hl}^{(3)}}\xspace}
\newcommand*{\chqone}{\ensuremath{c_{Hq}^{(1)}}\xspace}
\newcommand*{\chqthr}{\ensuremath{c_{Hq}^{(3)}}\xspace}
\newcommand*{\ced}{\ensuremath{c_{ed}}\xspace}
\newcommand*{\cee}{\ensuremath{c_{ee}}\xspace}
\newcommand*{\ceu}{\ensuremath{c_{eu}}\xspace}
\newcommand*{\cld}{\ensuremath{c_{ld}}\xspace}
\newcommand*{\cle}{\ensuremath{c_{le}}\xspace}
\newcommand*{\cll}{\ensuremath{c_{ll}}\xspace}
\newcommand*{\clu}{\ensuremath{c_{lu}}\xspace}
\newcommand*{\cqe}{\ensuremath{c_{qe}}\xspace}
\newcommand*{\cllone}{\ensuremath{c_{ll}^{(1)}}\xspace}
\newcommand*{\cllthr}{\ensuremath{c_{ll}^{(3)}}\xspace}
\newcommand*{\clqone}{\ensuremath{c_{lq}^{(1)}}\xspace}
\newcommand*{\clqthr}{\ensuremath{c_{lq}^{(3)}}\xspace}
\newcommand*{\sigdata}{\ensuremath{\vec\sigma^{\textrm{meas}}}\xspace}
\newcommand*{\sigpred}{\ensuremath{\vec\sigma^{\textrm{pred}}}\xspace}
\newcommand*{\sigSM}{\ensuremath{\vec \sigma^{\textrm{SM}}}}
\newcommand*{\sigSMLO}{\ensuremath{\vec \sigma^{\textrm{LO SM}}}}
\newcommand*{\sigINT}{\ensuremath{\vec \sigma^{\textrm{INT}}}}
\newcommand*{\sigQUAD}{\ensuremath{\vec \sigma^{\textrm{BSM}}}}
\newcommand*{\sina}{\ensuremath{\sin \alpha}}
\newcommand*{\mht}{\ensuremath{m_{h_2}}}
\newcommand*{\BF}{\ensuremath{\mathcal{B}_{Z\rightarrow 4\ell}}}
\newcommand*{\sigMeas}{\ensuremath{\sigma^{\text{meas}}}}
\newcommand*{\sigPred}{\ensuremath{\sigma^{\text{pred}}_{\text{non-\qqFourL}}}}

\newcommand*{\fnonTau}{\ensuremath{f_{\text{non-}\tau}}}
\newcommand*{\fZ}{\ensuremath{f_{\text{Z}}}}
\newcommand*{\sigZ}{\ensuremath{\sigma_{Z}}}
\newcommand*{\Accep}{\ensuremath{A_{\text{fid}}}}
\newcommand*{\Pvalue}{The $p$-value is the probability for the
$\chi^2$ to have at least the observed value, assuming the SM prediction. The number of degrees of freedom is the number of bins in the histogram.}
\newcommand*{\errorbars}{The error bars on the data points give the total uncertainty and the grey hashed band illustrates the contribution from the systematic uncertainty.}
\newcommand*{\SMpredictions}{The SM predictions use either \SHERPA{} or \POWHEG{} + \pythia{} to model the \qqFourL{} contribution, plotted in red and blue respectively. The uncertainties on the SM predictions are represented by the red and blue hash.}